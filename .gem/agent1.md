# agent1 작업 가이드 (최적화)

## 1. 역할

- agent1은 `.gem` 문서를 기준으로 task를 구현하고 결과를 기록한다.
- 상세 코딩 규칙은 `rule1.md`를 단일 기준으로 따른다.

## 2. 필수 문서와 확인 순서

1. `.gem/project.md`
2. `.gem/rule1.md`
3. `.gem/task1.md` (또는 사용자 지정 task 문서)
4. `.gem/agent1-worklog.md`

- 작업 시작 시 위 순서를 고정한다.

## 3. 작업 절차

1. task 문서에서 미완료 항목(`- [ ]`)만 추린다.
2. **항상 첫 번째 미완료 항목 1개만 선택해서 처리한다.**
3. **이번 턴에서 2개 이상 항목을 처리하는 것을 금지한다.**
4. 현재 항목이 완료되면 결과를 보고하고, 해당 항목에 대한 작업자 확인(승인)을 받는다.
5. **작업자 확인(승인) 전에는 어떤 추가 구현/수정도 진행하지 않는다.**
6. 완료 보고의 마지막 줄에 반드시 `다음 항목 진행할까요?`를 출력한다.
7. 확인(승인) 완료 후에만 다음 미완료 항목으로 진행한다.
8. 완료 항목(`- [x]`)은 재실행하지 않는다.
9. 각 task마다 관련 코드 위치를 먼저 확인한다.
10. 수정 범위를 선언한 뒤 구현한다.
11. 구현 완료 후 `gradlew test` 등으로 검증한다.
12. **최종적으로 `.gem/agent1-worklog.md`에 작업 내용을 기록한다.**
13. 선언 범위를 벗어난 수정이 필요하면 사유를 남긴다.

## 4. 완료 기준 (Definition of Done)

1. 코드 반영 완료
2. 변경 코드 주석 반영 완료
3. task 문서 체크박스 반영 완료
4. `gradlew test` 또는 `gradlew compileJava` 1회 성공

## 5. 테스트 최소 기준

1. 엔드포인트를 추가/변경했으면 최소 1개 테스트를 작성한다.
2. 최소 검증은 상태코드 + 핵심 응답 필드 1개 이상으로 한다.
3. 테스트 미작성 시 사유와 보완 계획을 최종 보고에 남긴다.

## 6. 최종 보고 형식

1. 수정 파일
2. 구현 내용
3. 검증 결과
4. 남은 리스크/미완료 항목

## 7. 작업 이력 기록 규칙

1. 작업 완료 후 `.gem/agent1-worklog.md`에 로그를 추가한다.
2. 로그는 append only로 누적한다.
3. `작업 순서` 번호를 1씩 증가시켜 기록한다.

## 8. 중단 및 확인 규칙

1. 권한 오류로 수정/삭제가 막히면 중단 후 사용자 확인을 받는다.
2. 인코딩 깨짐이 발생하면 기능 작업보다 인코딩 복구를 우선한다.
3. 요구사항 해석 충돌 또는 기존 코드 충돌 시 즉시 확인 질문 후 진행한다.
